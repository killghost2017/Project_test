<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>

    </style>

</head>

<body>





    <script src="./js/jquery-3.3.1.js"></script>
    <script>
        var a = 1; //全局变量
        function myfunction() {
            var b = 5; //局部变量
            c = 10; //变量声明时如果不使用 var 关键字，那么它就是一个全局变量，即便它在函数内定义。
            return a + b + c;
        }
        alert(myfunction());
        // alert(a);
        // alert(c);
        // alert(b);

        // 内嵌函数
        function add() {
            var x = 0;

            function add1() {
                return x += 1;
            }
            return add1();
        }
        alert(add());

        //闭包
        // 当B执行时，如果访问了A中变量对象中的值，那么闭包就会产生（函数A包含函数B)
        var f = (function A() {
            var a = 10;
            return function B() {
                alert(a);
                return a += 30;
            };
        })();
        alert(f());

        var hanshu = function f1(){
            var x = 1;
            function f2(){
                return x+=3;
            }
            return f2();
        }
        console.log("hanshu = "+hanshu());




        // 返回闭包时牢记的一点就是：返回函数不要引用任何循环变量，或者后续会发生变化的变量。
        // 方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变
        function count() {
            var arr = [];
            for (var i = 1; i <= 3; i++) {
                arr.push((function (n) {
                    return function() {
                        return n * n;
                    }
                })(i));
            }
            return arr;
        }
        var results = count();
        var f1 = results[0];
        var f2 = results[1];
        var f3 = results[2];
        f1(); // 1 
        f2();// 4 
        f3();// 9
    </script>
</body>

</html>